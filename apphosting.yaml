# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

env:
  # Build-time memory allocation for Node.js processes (including Next.js workers)
  - variable: NODE_OPTIONS
    value: "--max-old-space-size=8192"
    availability: [ BUILD, RUNTIME ]
  # Firebase
  - variable: FIREBASE_SERVICE_ACCOUNT_KEY
    secret: FIREBASE_SERVICE_ACCOUNT_KEY@8
    availability:
      - BUILD
      - RUNTIME
  # Email
  - variable: SENDGRID_API_KEY
    secret: SENDGRID_API_KEY@2
    availability:
      - RUNTIME
  - variable: SENDGRID_FROM_EMAIL
    value: "orders@bakedbot.ai"
    availability:
      - RUNTIME
  - variable: SENDGRID_FROM_NAME
    value: "BakedBot Orders"
    availability:
      - RUNTIME
  - variable: MAILJET_API_KEY
    secret: MAILJET_API_KEY
    availability:
      - RUNTIME
  - variable: MAILJET_SECRET_KEY
    secret: MAILJET_SECRET_KEY
    availability:
      - RUNTIME
  # Security
  # - variable: RECAPTCHA_SECRET_KEY
  #   secret: RECAPTCHA_SECRET_KEY
  #   availability:
  #     - RUNTIME
  # - variable: NEXT_PUBLIC_RECAPTCHA_SITE_KEY
  #   secret: NEXT_PUBLIC_RECAPTCHA_SITE_KEY
  #   availability:
  #     - RUNTIME
  # CannMenus
  - variable: CANNMENUS_API_BASE
    value: "https://api.cannmenus.com"
    availability:
      - RUNTIME
  - variable: CANNMENUS_API_KEY
    secret: CANNMENUS_API_KEY@3
    availability:
      - RUNTIME
  # Authorize.Net
  - variable: AUTHNET_API_LOGIN_ID
    secret: AUTHNET_API_LOGIN_ID
    availability:
      - RUNTIME
  - variable: AUTHNET_TRANSACTION_KEY
    secret: AUTHNET_TRANSACTION_KEY
    availability:
      - RUNTIME
  - variable: AUTHNET_ENV
    value: "sandbox"
    availability:
      - RUNTIME
  - variable: NEXT_PUBLIC_AUTHNET_CLIENT_KEY
    value: "9K42597r7YGCrMfdxPTd3Zy59fKe9rvWLbmKBK4bWr7Rn5ghdEmT9Fz8CZNLcT2G"
    availability:
      - RUNTIME
  # AI/Tools
  - variable: CLAUDE_API_KEY
    secret: CLAUDE_API_KEY
    availability:
      - RUNTIME
  - variable: GEMINI_API_KEY
    secret: GEMINI_API_KEY@2
    availability:
      - RUNTIME
  - variable: SERPER_API_KEY
    secret: SERPER_API_KEY@3
    availability:
      - RUNTIME
  - variable: OPENAI_VIDEO_API_KEY
    secret: OPENAI_VIDEO_API_KEY
    availability:
      - RUNTIME
  # Google OAuth
  - variable: GOOGLE_CLIENT_ID
    secret: GOOGLE_CLIENT_ID
    availability:
      - RUNTIME
  - variable: GOOGLE_CLIENT_SECRET
    secret: GOOGLE_CLIENT_SECRET
    availability:
      - RUNTIME
  # SMS
  # - variable: LEAFBUYER_API_KEY
  #   secret: LEAFBUYER_API_KEY
  #   availability:
  #     - RUNTIME
  # - variable: LEAFBUYER_API_SECRET
  #   secret: LEAFBUYER_API_SECRET
  #   availability:
  #     - RUNTIME
  # - variable: LEAFBUYER_API_URL
  #   secret: LEAFBUYER_API_URL
  #   availability:
  #     - RUNTIME
  # - variable: BLACKLEAF_API_KEY
  #   secret: BLACKLEAF_API_KEY
  #   availability:
  #     - RUNTIME
  - variable: BLACKLEAF_BASE_URL
    value: "https://api.blackleaf.io"
  # CanPay
  - variable: CANPAY_MODE
    value: "sandbox"
  - variable: CANPAY_ENVIRONMENT
    value: "sandbox"
  # - variable: CANPAY_APP_KEY
  #   secret: CANPAY_APP_KEY
  #   availability:
  #     - RUNTIME
  # - variable: CANPAY_API_SECRET
  #   secret: CANPAY_API_SECRET
  #   availability:
  #     - RUNTIME
  # - variable: CANPAY_INTEGRATOR_ID
  #   secret: CANPAY_INTEGRATOR_ID
  #   availability:
  #     - RUNTIME
  - variable: CANPAY_INTERNAL_VERSION
    value: "1.4.0"
  # Stripe
  # - variable: STRIPE_SECRET_KEY
  #   secret: STRIPE_SECRET_KEY
  #   availability:
  #     - RUNTIME
  # - variable: STRIPE_WEBHOOK_SECRET
  #   secret: STRIPE_WEBHOOK_SECRET
  #   availability:
  #     - RUNTIME
  # Monitoring
  # - variable: SENTRY_DSN
  #   secret: SENTRY_DSN
  #   availability:
  #     - RUNTIME
  # - variable: NEXT_PUBLIC_SENTRY_DSN
  #   secret: SENTRY_DSN
  #   availability:
  #     - RUNTIME
  # Dev/Security
  - variable: NEXT_PUBLIC_DEV_AUTH_BYPASS
    value: "false"
  - variable: NEXT_PUBLIC_APP_URL
    value: "https://bakedbot-prod--studio-567050101-bc6e8.us-central1.hosted.app"
  # Treasury
  - variable: TREASURY_ENABLE_REAL_TRADING
    value: "false"
  - variable: TREASURY_USE_FIRESTORE
    value: "true"
  - variable: FIRECRAWL_API_KEY
    secret: FIRECRAWL_API_KEY
  # RTRVR - Browser Automation
  - variable: RTRVR_API_KEY
    secret: RTRVR_API_KEY
    availability:
      - RUNTIME
  - variable: LETTA_API_KEY
    secret: LETTA_API_KEY@1
    availability:
      - RUNTIME


runConfig:
  minInstances: 0
  maxInstances: 10
  concurrency: 80
  cpu: 1
  memoryMiB: 512

build:
  runtime: nodejs20
  installCommand: npm install --legacy-peer-deps
  buildCommand: next build
