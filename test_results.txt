jest-haste-map: Haste module naming collision: nextn
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>\package.json
    * <rootDir>\.firebase\studio-567050101-bc6e8\functions\package.json

  console.warn
    {
      "timestamp": "2026-01-01T16:37:19.641Z",
      "level": "warn",
      "message": "SENDGRID_API_KEY is missing. Emails will not be sent."
    }

    [0m [90m 36 |[39m                 console[33m.[39mlog[33m;[39m
     [90m 37 |[39m
    [31m[1m>[22m[39m[90m 38 |[39m         consoleMethod([33mJSON[39m[33m.[39mstringify(logEntry[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 39 |[39m
     [90m 40 |[39m         [90m// In production, send to Google Cloud Logging[39m
     [90m 41 |[39m         [36mif[39m (process[33m.[39menv[33m.[39m[33mNODE_ENV[39m [33m===[39m [32m'production'[39m [33m&&[39m [36mtypeof[39m window [33m===[39m [32m'undefined'[39m) {[0m

      at Logger.consoleMethod [as log] (src/lib/monitoring.ts:38:9)
      at Logger.log [as warn] (src/lib/monitoring.ts:80:14)
      at Object.warn (src/lib/email/sendgrid.ts:13:10)
      at Object.<anonymous> (src/lib/email/dispatcher.ts:19:19)
      at Object.<anonymous> (src/skills/core/email/index.ts:32:21)
      at Object.<anonymous> (tests/skills/skills-implementation.test.ts:10:16)

  console.warn
    {
      "timestamp": "2026-01-01T16:37:19.819Z",
      "level": "warn",
      "message": "MAILJET_API_KEY or MAILJET_SECRET_KEY is missing."
    }

    [0m [90m 36 |[39m                 console[33m.[39mlog[33m;[39m
     [90m 37 |[39m
    [31m[1m>[22m[39m[90m 38 |[39m         consoleMethod([33mJSON[39m[33m.[39mstringify(logEntry[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 39 |[39m
     [90m 40 |[39m         [90m// In production, send to Google Cloud Logging[39m
     [90m 41 |[39m         [36mif[39m (process[33m.[39menv[33m.[39m[33mNODE_ENV[39m [33m===[39m [32m'production'[39m [33m&&[39m [36mtypeof[39m window [33m===[39m [32m'undefined'[39m) {[0m

      at Logger.consoleMethod [as log] (src/lib/monitoring.ts:38:9)
      at Logger.log [as warn] (src/lib/monitoring.ts:80:14)
      at Object.warn (src/lib/email/mailjet.ts:19:12)
      at Object.<anonymous> (src/lib/email/dispatcher.ts:20:18)
      at Object.<anonymous> (src/skills/core/email/index.ts:32:21)
      at Object.<anonymous> (tests/skills/skills-implementation.test.ts:10:16)

  console.error
    Failed to fetch email provider setting, defaulting to Mailjet Error: Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.
        at GoogleAuth.getApplicationDefaultAsync (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-auth-library\build\src\auth\googleauth.js:287:15)
        at GoogleAuth._GoogleAuth_determineClient (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-auth-library\build\src\auth\googleauth.js:834:32)
        at GoogleAuth.getClient (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-auth-library\build\src\auth\googleauth.js:698:20)
        at GrpcClient._getCredentials (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-gax\src\grpc.ts:209:20)
        at GrpcClient.createStub (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-gax\src\grpc.ts:426:19)
    Caused by: Error: 
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\index.js:1040:27
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:110:30
        at NoopContextManager.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\context\NoopContextManager.ts:31:15)
        at ContextAPI.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\api\context.ts:77:42)
        at NoopTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\NoopTracer.ts:98:27)
        at ProxyTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\ProxyTracer.ts:51:20)
        at EnabledTraceUtil.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:102:28)
        at Firestore.getAll (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\index.js:1031:32)
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\reference\document-reference.js:182:36
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:110:30
        at NoopContextManager.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\context\NoopContextManager.ts:31:15)
        at ContextAPI.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\api\context.ts:77:42)
        at NoopTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\NoopTracer.ts:98:27)
        at ProxyTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\ProxyTracer.ts:51:20)
        at EnabledTraceUtil.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:102:28)
        at DocumentReference.get (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\reference\document-reference.js:181:43)
        at get (C:\Users\marte\Baked for Brands\bakedbot-for-brands\src\lib\email\dispatcher.ts:19:74)
        at getProvider (C:\Users\marte\Baked for Brands\bakedbot-for-brands\src\lib\email\dispatcher.ts:43:28)
        at Object.marketingSendImpl [as implementation] (C:\Users\marte\Baked for Brands\bakedbot-for-brands\src\skills\core\email\index.ts:131:43)
        at Object.<anonymous> (C:\Users\marte\Baked for Brands\bakedbot-for-brands\tests\skills\skills-implementation.test.ts:138:28)

    [0m [90m 24 |[39m         [36mreturn[39m cachedProvider[33m;[39m
     [90m 25 |[39m     } [36mcatch[39m (e) {
    [31m[1m>[22m[39m[90m 26 |[39m         console[33m.[39merror([32m'Failed to fetch email provider setting, defaulting to Mailjet'[39m[33m,[39m e)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 27 |[39m         [36mreturn[39m [32m'mailjet'[39m[33m;[39m
     [90m 28 |[39m     }
     [90m 29 |[39m }[0m

      at error (src/lib/email/dispatcher.ts:26:17)
      at sendGenericEmail (src/lib/email/dispatcher.ts:43:22)
      at Object.marketingSendImpl [as implementation] (src/skills/core/email/index.ts:131:21)
      at Object.<anonymous> (tests/skills/skills-implementation.test.ts:138:28)

  console.error
    Failed to fetch email provider setting, defaulting to Mailjet Error: Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.
        at GoogleAuth.getApplicationDefaultAsync (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-auth-library\build\src\auth\googleauth.js:287:15)
        at GoogleAuth._GoogleAuth_determineClient (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-auth-library\build\src\auth\googleauth.js:834:32)
        at GoogleAuth.getClient (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-auth-library\build\src\auth\googleauth.js:698:20)
        at GrpcClient._getCredentials (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-gax\src\grpc.ts:209:20)
        at GrpcClient.createStub (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\google-gax\src\grpc.ts:426:19)
    Caused by: Error: 
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\index.js:1040:27
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:110:30
        at NoopContextManager.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\context\NoopContextManager.ts:31:15)
        at ContextAPI.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\api\context.ts:77:42)
        at NoopTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\NoopTracer.ts:98:27)
        at ProxyTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\ProxyTracer.ts:51:20)
        at EnabledTraceUtil.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:102:28)
        at Firestore.getAll (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\index.js:1031:32)
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\reference\document-reference.js:182:36
        at C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:110:30
        at NoopContextManager.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\context\NoopContextManager.ts:31:15)
        at ContextAPI.with (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\api\context.ts:77:42)
        at NoopTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\NoopTracer.ts:98:27)
        at ProxyTracer.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@opentelemetry\api\src\trace\ProxyTracer.ts:51:20)
        at EnabledTraceUtil.startActiveSpan (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\telemetry\enabled-trace-util.js:102:28)
        at DocumentReference.get (C:\Users\marte\Baked for Brands\bakedbot-for-brands\node_modules\@google-cloud\firestore\build\src\reference\document-reference.js:181:43)
        at get (C:\Users\marte\Baked for Brands\bakedbot-for-brands\src\lib\email\dispatcher.ts:19:74)
        at getProvider (C:\Users\marte\Baked for Brands\bakedbot-for-brands\src\lib\email\dispatcher.ts:43:28)
        at Object.marketingSendImpl [as implementation] (C:\Users\marte\Baked for Brands\bakedbot-for-brands\src\skills\core\email\index.ts:131:43)
        at Object.<anonymous> (C:\Users\marte\Baked for Brands\bakedbot-for-brands\tests\skills\skills-implementation.test.ts:154:13)

    [0m [90m 24 |[39m         [36mreturn[39m cachedProvider[33m;[39m
     [90m 25 |[39m     } [36mcatch[39m (e) {
    [31m[1m>[22m[39m[90m 26 |[39m         console[33m.[39merror([32m'Failed to fetch email provider setting, defaulting to Mailjet'[39m[33m,[39m e)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 27 |[39m         [36mreturn[39m [32m'mailjet'[39m[33m;[39m
     [90m 28 |[39m     }
     [90m 29 |[39m }[0m

      at error (src/lib/email/dispatcher.ts:26:17)
      at sendGenericEmail (src/lib/email/dispatcher.ts:43:22)
      at Object.marketingSendImpl [as implementation] (src/skills/core/email/index.ts:131:21)
      at Object.<anonymous> (tests/skills/skills-implementation.test.ts:154:13)

