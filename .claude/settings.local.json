{
  "permissions": {
    "allow": [
      "Bash(dir:*)",
      "Bash(firebase apphosting:backends:list:*)",
      "Bash(set PLAYWRIGHT_BASE_URL=https://bakedbot.ai)",
      "Bash(npm install:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: Sync package-lock.json with package.json for Firebase App Hosting build\n\nThe Firebase build was failing with npm ci because package-lock.json was out of sync with package.json after recent dependency updates. Regenerated the lock file to include all missing packages (webpack, @testing-library/dom, and related dependencies).\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push)",
      "Bash(rm:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: Regenerate package-lock.json from scratch to resolve all sync issues\n\nDeleted and regenerated package-lock.json to ensure it''s perfectly in sync with package.json. This resolves the winston and other missing dependency errors in Firebase App Hosting builds.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(npm ci:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: Regenerate package-lock.json with legacy-peer-deps for proper dependency resolution\n\nGenerated package-lock.json using `npm install --legacy-peer-deps` to ensure all peer dependencies are properly resolved. This lock file is compatible with both `npm ci` and `npm install` commands used by Firebase App Hosting.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(gcloud secrets list:*)",
      "Bash(npm run build:*)",
      "Bash(ls:*)",
      "Bash(jobs:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run check:types:*)",
      "Bash(mv:*)",
      "Bash(python:*)",
      "Bash(cp:*)",
      "Bash(cat:*)",
      "Bash(ROADMAP_PHASE0.md <<'TICKET1'\n---\n\n## Ticket: P0-SEC-FIRESTORE-RULES\n**Owner:** Dev 3 (Lead), Dev 1 (Review), Dev 2 (Deploy)\n**Priority:** CRITICAL\n\n### Summary\nImplement comprehensive Firestore security rules. Currently no security rules found in repository, allowing unauthorized data access.\n\n### Files\n- `firestore.rules` (to be created at project root)\n- `firebase.json`\n- `tests/firestore-rules/` (Dev 3 to create)\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Created ticket. Dev 3 lead due to security focus.\n\nTICKET1)",
      "Bash(ROADMAP_PHASE0.md <<'MORETICKETS'\n---\n\n## Ticket: P0-SEC-STRIPE-CONFIG\n**Owner:** Dev 2 (Lead), Dev 1 (Implementation)\n**Priority:** CRITICAL\n\n### Summary\nFix Stripe configuration by adding proper secrets to Secret Manager and removing dummy key fallbacks.\n\n### Files\n- `src/lib/payments/stripe.ts`\n- `apphosting.yaml`\n- `docs/SECRETS.md` (to be created)\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Created ticket. Dev 2 lead due to infra focus.\n\n---\n\n## Ticket: P0-COMP-STATE-RULES\n**Owner:** Dev 1 (Implementation), Dev 3 (Tests)\n**Priority:** CRITICAL\n\n### Summary\nComplete state compliance rules for all launch states. Only IL and CA implemented (2 of 50 states).\n\n### Files\n- `src/lib/compliance/state-rules.ts`\n- `src/server/agents/deebo.ts`\n- `docs/COMPLIANCE.md` (to be created)\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: BLOCKER for launch - legal requirement.\n\n---\n\n## Ticket: P0-COMP-DEEBO-AGENT\n**Owner:** Dev 1 (Implementation), Dev 3 (Tests)\n**Priority:** CRITICAL\n\n### Summary\nImplement Deebo compliance agent. Currently placeholder only, making checkout non-compliant.\n\n### Files\n- `src/server/agents/deebo.ts`\n- `src/app/api/checkout/route.ts`\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Depends on P0-COMP-STATE-RULES.\n\n---\n\n## Ticket: P0-MON-SENTRY\n**Owner:** Dev 2 (Configuration), Dev 1 (Integration)\n**Priority:** CRITICAL\n\n### Summary\nConfigure Sentry error tracking. Package installed but not configured.\n\n### Files\n- `src/lib/monitoring.ts`\n- `sentry.client.config.ts` (to be created)\n- `sentry.server.config.ts` (to be created)\n- `apphosting.yaml`\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Essential for production observability.\n\n---\n\n## Ticket: P0-SEC-RBAC-SERVER\n**Owner:** Dev 1 (Implementation), Dev 3 (Tests)\n**Priority:** HIGH\n\n### Summary\nAdd server-side role-based authorization. Currently auth checks only happen client-side and can be bypassed.\n\n### Files\n- `src/middleware.ts`\n- `src/lib/auth.ts`\n- `src/app/dashboard/*/page.tsx`\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Server-side auth essential before launch.\n\n---\n\n## Ticket: P0-SEC-DEV-AUTH\n**Owner:** Dev 1 (Implementation), Dev 2 (Config)\n**Priority:** HIGH\n\n### Summary\nSecure dev auth bypass to prevent unauthorized production access.\n\n### Files\n- `src/lib/auth.ts`\n- `src/components/dev-login-button.tsx`\n- `next.config.js`\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Security risk if dev bypass in prod.\n\n---\n\n## Ticket: P0-COMP-AGE-VERIFY\n**Owner:** Dev 1 (Implementation), Dev 3 (Tests)\n**Priority:** HIGH\n\n### Summary\nAdd server-side age verification. Currently only client-side localStorage check (bypassable).\n\n### Files\n- `src/app/api/checkout/route.ts`\n- `src/lib/schema/customer.ts`\n- `src/server/agents/deebo.ts`\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Legal requirement for cannabis sales.\n\n---\n\n## Ticket: P0-MON-LOGGING\n**Owner:** Dev 1 (Implementation), Dev 2 (GCP Config)\n**Priority:** HIGH\n\n### Summary\nConfigure Google Cloud Logging and replace 209 console.log calls with structured logging.\n\n### Files\n- `src/lib/logger.ts` (to be created/enhanced)\n- `src/middleware.ts`\n- Search codebase for `console.log` (209 instances)\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Large refactor, essential for debugging.\n\n---\n\n## Ticket: P0-CFG-SECRETS-AUDIT\n**Owner:** Dev 2 (Lead), Dev 1 (Review)\n**Priority:** HIGH\n\n### Summary\nAudit and verify all secrets configured in Google Secret Manager.\n\n### Files\n- `apphosting.yaml`\n- `docs/SECRETS.md` (to be created)\n- `.env.example`\n\n### AI Log\n- [Dev1-Claude @ 2025-11-29]: Prerequisites for other security tickets.\n\n---\n\n## COMPLETED TICKETS\n\n---\n\n## Ticket: P0-INFRA-FIX-500\n**Owner:** Dev 2 (Infra)\n**Priority:** CRITICAL\n**Status:** âœ… DONE\n\n### Summary\nResolved 500 error on bakedbot.ai - missing Firebase credentials and build failures.\n\n### AI Log\n- [Dev2-Infra @ 2025-11-28]: Fixed service account key, build pipeline, site now live.\n\n---\n\n*Last Updated: November 29, 2025*\n*Next Review: Daily during Phase 0*\nMORETICKETS)",
      "Bash(npm run lint:*)",
      "Bash(firebase login)",
      "Bash(npm test:*)",
      "Bash(git checkout:*)",
      "Bash(git push:*)",
      "Bash(npx playwright test:*)",
      "Bash(where:*)",
      "Bash(\"C:\\Users\\admin\\AppData\\Local\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd\" config get-value project)",
      "Bash(\"C:\\Users\\admin\\AppData\\Local\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd\" secrets describe BLACKLEAF_API_KEY --project=studio-567050101-bc6e8)",
      "Bash(\"C:\\Users\\admin\\AppData\\Local\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd\" secrets create BLACKLEAF_API_KEY --data-file=- --project=studio-567050101-bc6e8)",
      "Bash(\"C:\\Users\\admin\\AppData\\Local\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd\" secrets add-iam-policy-binding BLACKLEAF_API_KEY --member=\"serviceAccount:firebase-adminsdk@studio-567050101-bc6e8.iam.gserviceaccount.com\" --role=\"roles/secretmanager.secretAccessor\" --project=studio-567050101-bc6e8)",
      "Bash(\"C:\\Users\\admin\\AppData\\Local\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd\" iam service-accounts list --project=studio-567050101-bc6e8 --filter=\"firebase OR apphosting\" --format=\"table(email)\")",
      "Bash(gcloud iam service-accounts list:*)",
      "Bash(powershell -Command:*)",
      "Bash(firebase --version:*)",
      "Bash(git mv:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(taskkill /F /PID 10992)",
      "Bash(taskkill //F //PID 10992)",
      "Bash(npm run dev:*)",
      "Bash(taskkill //F //PID 30108)",
      "Bash(PORT=3002 npm run dev:*)",
      "Bash(taskkill //F //PID 14556)",
      "Bash(taskkill //F //PID 34256)",
      "Bash(git pull:*)",
      "Bash(git stash:*)",
      "Bash(git -C \"c:\\Users\\admin\\BakedBot for Brands\\bakedbot-for-brands\" log --oneline -20)",
      "Bash(find:*)",
      "Bash(grep:*)",
      "Bash(node --version:*)",
      "Bash(npm --version:*)",
      "Bash(git --version:*)"
    ],
    "deny": [],
    "ask": []
  }
}
